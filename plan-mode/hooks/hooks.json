{
  "description": "Enhanced planning workflow hooks - orchestrates multi-phase planning with Linear integration",
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "EnterPlanMode",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "The user is entering plan mode. Enhance this planning session by loading the planning-methodology skill and following the 7-phase planning process:\n\n1. **Context Gathering** - Use context-researcher agent with structured exploration (4 phases)\n2. **Clarifying Questions** - Ask about edge cases, error handling, scope BEFORE designing\n3. **Specification & Analysis** - Six Core Areas checklist, boundaries\n4. **Architecture Decision** - Use architecture-analyst agent, apply clean implementation principle\n5. **Task Decomposition** - Use task-decomposer agent for 2-5 minute tasks with evidence\n6. **Validation** - Use plan-validator agent with confidence filtering (â‰¥80%)\n7. **Documentation** - Persist plan and offer Linear integration\n\nReturn a systemMessage reminding to follow this enhanced workflow. Return 'approve' to continue.",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check if this session involved planning (plan mode, feature planning, task breakdown). If YES and a plan was created:\n\n1. Remind to use AskUserQuestion to offer Linear integration:\n   - Option 1: Create new Linear ticket with the plan\n   - Option 2: Update existing Linear ticket (user provides ID)\n   - Option 3: Skip Linear integration\n\n2. If Linear was already offered or this wasn't a planning session, approve stopping.\n\nReturn 'approve' to stop or 'block' with reminder about Linear integration if planning occurred but Linear wasn't offered.",
            "timeout": 15
          }
        ]
      }
    ]
  }
}
