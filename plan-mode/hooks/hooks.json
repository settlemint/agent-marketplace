{
  "description": "Advisory planning hints that never block normal operation; detect plan mode via permissions or explicit entry",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Inspect session metadata/permissions. If plan mode is indicated (e.g., mode=plan, plan-only permissions, or plan-mode mention), return 'approve' with a systemMessage reminding to follow the 7-phase planning workflow (Context -> Clarifying Questions -> Specification -> Architecture -> Tasks -> Validation -> Documentation & Linear). If not planning, return 'approve' with no systemMessage.",
            "timeout": 3
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "(?i)(\\bplan mode\\b|\\bcreate\\b.*\\bplan\\b|\\bwrite\\b.*\\bspec\\b|\\bbreak\\b.*\\bdown\\b|\\bdesign\\b.*\\bimplementation\\b|\\bfeature\\b.*\\bplan\\b)",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Determine whether the user is explicitly requesting a plan/spec/design/breakdown. If yes, return 'approve' with a systemMessage to use the 7-phase planning workflow with clarifying questions and documentation. If not, return 'approve' with no systemMessage.",
            "timeout": 5
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "EnterPlanMode",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Plan mode detected. Return 'approve' with a systemMessage to follow the 7-phase planning process (Context -> Clarifying Questions -> Specification -> Architecture -> Tasks -> Validation -> Documentation & Linear). Never block.",
            "timeout": 10
          }
        ]
      }
    ]
  }
}
